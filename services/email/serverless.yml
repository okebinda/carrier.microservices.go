# Email Microservice
#  using Serverless framework

service: carrier-email
# app and org for use with dashboard.serverless.com
#app: your-app-name
#org: your-org-name

frameworkVersion: '2'

# enable v3 env variable handling while using v2
# @todo: remove once upgraded to v3
useDotenv: true

# custom variables - you should change these to your own values
custom:
  region: ${env:REGION, "us-east-1"}
  domain: ${env:DOMAIN, "domain.com"}
  prefix: ${env:PREFIX, "aws-com-domain"}

provider:
  name: aws
  region: ${self:custom.region}
  runtime: go1.x
  lambdaHashingVersion: 20201221
  deploymentBucket:
    name: code.${self:custom.domain}
  
  # enable v3 API gateway naming convention
  # @todo: remove once upgraded to v3
  apiGateway:
    shouldStartNameWithService: true

package:
  patterns:
    - '!./**'
    - ./bin/**

functions:
  email:
    handler: bin/email
    events:
      - httpApi:
          path: /emails
          method: get
